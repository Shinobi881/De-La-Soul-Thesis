<!DOCTYPE html>
<!-- adding the ng-app= "soundGlomerate" is a driective to run the soundGlomerate module in the app.js file. This allows us to write expressions, which are dynamic values in html (numerical and string operations) -->
<html ng-app= "soundGlomerate">
<head>
  <title>SoundGlomerate</title>
  <!-- consider changing the href by downloading the library locally -->
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
</head>
<body ng-controller="StoreController as store">

<!-- ng-init="tab = 1" initializes tab to 1 --> <!-- The ng-init should go inside a controller (not directly into a view or html) as a best practice-->

<section ng-controller="PanelController as panel" class="panel">
  <ul class="nav nav-pills">
  <!-- the statement ng-click="tab = 1" assigns a value of an expression to "tab" when it is clicked -->
  
  <!-- ng-class="{active:tab ===1}" highlights the tab (in blue) when a specific tab is clicked. tab 1 is highlighted when the page first renders because the default (ie ng-init) is set to tab 1 -->

  <li ng-class="{active: panel.isSelected(1)}"> 
    <a href ng-click="panel.selectTab(1)">tab 1</a>
  </li>
  <li ng-class="{active: panel.isSelected(2)}">
    <a href ng-click="panel.selectTab(2)">tab 2</a>
  </li>
  <li ng-class="{active: panel.isSelected(3)}">
    <a href ng-click="panel.selectTab(3)">tab 3</a>
  </li>
  <li ng-class="{active: panel.isSelected(4)}">
    <a href ng-click="panel.selectTab(4)">tab 4</a>
  </li>
  </ul>

  <!-- this displays the tab value. the value automatically updates when a tab is clicked and will not show up until a tab is clicked (ie two-way data binding!!!) -->
  {{tab}}




  <!-- when a tab is clicked, the tab value is set (and is printed, see above  line 19). the panel with the same tab number is rendered -->
  <div class="panel" ng-show="panel.isSelected(1)">
    <ul>
    <h4>Reviews</h4>
    <li ng-repeat="review in product.reviews">
      <blockquote>
        <b>stars:{{review.stars}}</b>
        {{review.body}}
        <cite>by: {{review.author}}</cite>
      </blockquote>
    </li>
    </ul>
    <!-- Moving functionality from inline to the "ReviewController" in app.js, novalidate is turns off native for validation,  -->
    <form name="reviewForm" ng-controller="ReviewController as reviewCtrl" ng-submit="reviewCtrl.addReview(product)" novalidate>
      
      <blockquote>
        <b>stars: {{reviewCtrl.review.stars}}</b> 
        {{reviewCtrl.review.body}}
        <cite>by: {{reviewCtrl.review.author}}</cite>
      </blockquote>
      <select ng-model="reviewCtrl.review.stars" class="form-control" required>
        <option value="1">1 star</option>
        <option value="2">2 stars</option>
      </select>
      <textarea ng-model="reviewCtrl.review.body" required></textarea>
      <label>by: </label>
      <input name="author" ng-model="reviewCtrl.review.author" type="email" required/>
      <!-- This, so reviewForm refers to the name on the form and "$valid" is a property of a form, comes from Agulare, built in-->
      <div> review form is {{reviewForm.$valid}}</div>
      <input type="submit" value="Submit" />
    </form>
  </div>
  <div class="panel" ng-show="panel.isSelected(2)">
    <h4>text here 22222</h4>
  </div>
  <div class="panel" ng-show="panel.isSelected(3)">
    <h4>text here 333333</h4>
  </div>
  <div class="panel" ng-show="panel.isSelected(4)">
    <h4>text here 444444</h4>
  </div>

</section>
  


  <!-- this is where we want to display the 'gem' info. ng-controller allows us to attach the LandingController (from app.js) to the html element. note: the directive is "ng-controller",  the controller name is "LandingController", the alias is "soundGlomerate" and 'as' is a reserved word.-->
  <div ng-controller="StoreController as store">
    <!-- this allows us to loop through the gems array; store.products is the array we want to iterate through. product refers to the current product -->
    <div ng-repeat="product in store.products">
    <!-- this is another way to write the line below -->
    <!-- <div ng-show="!store.product.soldOut"> -->
    <!-- this means hide the product when the product is sold out, which means when the soldOut value in the gem object is true -->
    <!-- <div ng-hide="store.product.soldOut"> -->
<!--       <h1> {{store.product.name}} </h1>
      <h2> ${{store.product.price}} </h2>
      <p> {{store.product.description}} </p>
 -->      <!-- only want to show after if the value of this expression is true (the default is false) -->
      
    <!-- this goes with the loop (ie ng-repeat) -->
      <h1> {{product.name}} </h1>
      <!-- this uses the currency filter to format the data correctly -->
      <h2> {{product.price | currency}} </h2>
      <p> {{product.description}} </p>
      
      <!-- the image needs to be in the ng-source directive to load (regular html src="" will not render the images) -->
     <!--  <img ng-src="{{product.images[0].full}}"/> -->

      <button ng-show="store.product.canPurchase"> Add To Cart </button> 
    </div>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <!-- consider changing the href by downloading the library locally -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.4/angular.min.js"></script>
  <!-- this maybe superfluous -->
  <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <!-- this calls the app.js file -->
  <script type="text/javascript" src="./js/app.js"></script>
<!--   <p>{{'hello' + ' you'}}</p> -->
</body>
</html>


